<%- include('../partials/enhanced-modal') %>
<!-- Create New Card Modal (Unified Design) -->
<div
  id="createCardModal"
  class="fixed inset-0 bg-black bg-opacity-60 hidden z-50 backdrop-blur-sm modal-overlay flex items-center justify-center"
>
  <div
    class="bg-white rounded-3xl shadow-2xl max-w-xl w-full mx-4 max-h-[95vh] overflow-hidden modal-container"
  >
    <!-- Modal Header -->
    <div
      class="bg-gradient-to-r from-green-50 to-emerald-50 px-8 py-6 border-b border-green-100"
    >
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-4">
          <div
            class="w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center shadow-lg"
          >
            <i class="fas fa-plus text-white text-lg"></i>
          </div>
          <div>
            <h2 class="text-2xl font-bold text-gray-900">Create New Card</h2>
            <p class="text-sm text-gray-600">Assign a new card to a person</p>
          </div>
        </div>
        <button
          id="closeCreateCardModal"
          class="text-gray-400 hover:text-gray-600 transition-colors p-2 hover:bg-white hover:bg-opacity-50 rounded-xl"
        >
          <i class="fas fa-times text-xl"></i>
        </button>
      </div>
    </div>
    <!-- Modal Body -->
    <div class="modal-body p-8 overflow-y-auto max-h-[70vh]">
      <form id="createCardForm" class="space-y-6">
        <div
          class="bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl p-4 border border-cyan-100 mb-4"
        >
          <label
            for="personSearch"
            class="block text-sm font-medium text-gray-700 mb-2"
            >Search Person</label
          >
          <div class="relative">
            <input
              type="text"
              id="personSearch"
              placeholder="Search by name, CNIC, or phone..."
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-cyan-500"
            />
            <div class="absolute right-3 top-2.5">
              <i class="fas fa-search text-gray-400"></i>
            </div>
          </div>
          <div
            id="personSearchResults"
            class="mt-2 max-h-40 overflow-y-auto hidden"
          >
            <!-- Search results will be populated here -->
          </div>
        </div>
        <div id="selectedPersonInfo" class="mb-4 hidden">
          <div class="bg-gray-50 rounded-lg p-4">
            <h4 class="font-medium text-gray-900 mb-2">Selected Person:</h4>
            <div id="personDetails">
              <!-- Person details will be populated here -->
            </div>
          </div>
        </div>
        <input type="hidden" id="selectedPersonId" />
        <div
          class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-4 border border-green-100 mb-4"
        >
          <label
            for="cardNotes"
            class="block text-sm font-medium text-gray-700 mb-2"
            >Notes (Optional)</label
          >
          <textarea
            id="cardNotes"
            rows="3"
            placeholder="Add any notes about this card..."
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
          ></textarea>
        </div>
      </form>
    </div>
    <!-- Modal Footer -->
    <div
      class="modal-footer bg-gray-50 px-8 py-6 border-t border-gray-200 flex justify-end gap-3"
    >
      <button type="button" id="cancelCreateCard" class="btn btn-secondary">
        <i class="fas fa-times mr-2"></i>Cancel
      </button>
      <button
        type="submit"
        form="createCardForm"
        id="createCardBtn"
        class="btn btn-primary bg-green-600 hover:bg-green-700 text-white"
        disabled
      >
        <i class="fas fa-plus mr-2"></i>Create Card
      </button>
    </div>
  </div>
</div>
