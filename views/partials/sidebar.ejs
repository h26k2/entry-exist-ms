<aside
  id="sidebar"
  class="fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg border-r border-gray-200 h-full flex flex-col transform -translate-x-full lg:translate-x-0 lg:static lg:inset-0 transition-transform duration-300 ease-in-out"
>
  <!-- Logo/Brand Section -->
  <div class="p-4 lg:p-6 border-b border-gray-200">
    <div class="flex items-center">
      <div class="w-8 h-8 lg:w-10 lg:h-10 mr-3">
        <img 
          src="/images/bull.jpg" 
          alt="Charging Bull Logo" 
          class="w-full h-full object-cover rounded-lg"
        />
      </div>
      <div>
        <h2 class="text-base lg:text-lg font-bold text-gray-900">
          Charging Bull
        </h2>
        <p class="text-xs text-gray-500">Sports Complex</p>
      </div>
    </div>
  </div>

  <!-- Navigation -->
  <nav class="flex-1 p-3 lg:p-4">
    <ul class="space-y-1 lg:space-y-2">
      <li>
        <a
          href="/dashboard"
          class="flex items-center px-3 lg:px-4 py-2 lg:py-3 text-sm font-medium rounded-lg transition-all duration-200 <%= activePage === 'dashboard' ? 'bg-blue-50 text-blue-700 border-r-4 border-blue-600' : 'text-gray-700 hover:bg-gray-50 hover:text-gray-900' %>"
        >
          <i
            class="fas fa-tachometer-alt w-4 h-4 lg:w-5 lg:h-5 mr-3 <%= activePage === 'dashboard' ? 'text-blue-600' : 'text-gray-400' %>"
          ></i>
          <span class="hidden sm:inline">Dashboard</span>
        </a>
      </li>
      <li>
        <a
          href="/dashboard/entry"
          class="flex items-center px-3 lg:px-4 py-2 lg:py-3 text-sm font-medium rounded-lg transition-all duration-200 <%= activePage === 'entry' ? 'bg-blue-50 text-blue-700 border-r-4 border-blue-600' : 'text-gray-700 hover:bg-gray-50 hover:text-gray-900' %>"
        >
          <i
            class="fas fa-door-open w-4 h-4 lg:w-5 lg:h-5 mr-3 <%= activePage === 'entry' ? 'text-blue-600' : 'text-gray-400' %>"
          ></i>
          <span class="hidden sm:inline">Entry Management</span>
        </a>
      </li>
      <!--<li>
        <a
          href="/dashboard/people"
          class="flex items-center px-3 lg:px-4 py-2 lg:py-3 text-sm font-medium rounded-lg transition-all duration-200 <%= activePage === 'people' ? 'bg-blue-50 text-blue-700 border-r-4 border-blue-600' : 'text-gray-700 hover:bg-gray-50 hover:text-gray-900' %>"
        >
          <i
            class="fas fa-users w-4 h-4 lg:w-5 lg:h-5 mr-3 <%= activePage === 'people' ? 'text-blue-600' : 'text-gray-400' %>"
          ></i>
          <span class="hidden sm:inline">People Management</span>
        </a>
      </li>
    -->
      <li>
        <a
          href="/dashboard/reports"
          class="flex items-center px-3 lg:px-4 py-2 lg:py-3 text-sm font-medium rounded-lg transition-all duration-200 <%= activePage === 'reports' ? 'bg-blue-50 text-blue-700 border-r-4 border-blue-600' : 'text-gray-700 hover:bg-gray-50 hover:text-gray-900' %>"
        >
          <i
            class="fas fa-chart-bar w-4 h-4 lg:w-5 lg:h-5 mr-3 <%= activePage === 'reports' ? 'text-blue-600' : 'text-gray-400' %>"
          ></i>
          <span class="hidden sm:inline">Reports & Analytics</span>
        </a>
      </li>
      <% if (user.role === 'admin') { %>
      <!--<li>
        <a
          href="/dashboard/billing"
          class="flex items-center px-3 lg:px-4 py-2 lg:py-3 text-sm font-medium rounded-lg transition-all duration-200 <%= activePage === 'billing' ? 'bg-blue-50 text-blue-700 border-r-4 border-blue-600' : 'text-gray-700 hover:bg-gray-50 hover:text-gray-900' %>"
        >
          <i
            class="fas fa-file-invoice-dollar w-4 h-4 lg:w-5 lg:h-5 mr-3 <%= activePage === 'billing' ? 'text-blue-600' : 'text-gray-400' %>"
          ></i>
          <span class="hidden sm:inline">Billing</span>
        </a>
      </li> -->
      <li>
        <a
          href="/dashboard/facilities"
          class="flex items-center px-3 lg:px-4 py-2 lg:py-3 text-sm font-medium rounded-lg transition-all duration-200 <%= activePage === 'facilities' ? 'bg-blue-50 text-blue-700 border-r-4 border-blue-600' : 'text-gray-700 hover:bg-gray-50 hover:text-gray-900' %>"
        >
          <i
            class="fas fa-building w-4 h-4 lg:w-5 lg:h-5 mr-3 <%= activePage === 'facilities' ? 'text-blue-600' : 'text-gray-400' %>"
          ></i>
          <span class="hidden sm:inline">Facilities</span>
        </a>
      </li>
      <li>
        <a
          href="/dashboard/devices"
          class="flex items-center px-3 lg:px-4 py-2 lg:py-3 text-sm font-medium rounded-lg transition-all duration-200 <%= activePage === 'devices' ? 'bg-blue-50 text-blue-700 border-r-4 border-blue-600' : 'text-gray-700 hover:bg-gray-50 hover:text-gray-900' %>"
        >
          <i
            class="fas fa-hdd w-4 h-4 lg:w-5 lg:h-5 mr-3 <%= activePage === 'devices' ? 'text-blue-600' : 'text-gray-400' %>"
          ></i>
          <span class="hidden sm:inline">Devices</span>
        </a>
      </li>
      <li>
        <a
          href="/dashboard/operator"
          class="flex items-center px-3 lg:px-4 py-2 lg:py-3 text-sm font-medium rounded-lg transition-all duration-200 <%= activePage === 'operator' ? 'bg-blue-50 text-blue-700 border-r-4 border-blue-600' : 'text-gray-700 hover:bg-gray-50 hover:text-gray-900' %>"
        >
          <i
            class="fas fa-user-cog w-4 h-4 lg:w-5 lg:h-5 mr-3 <%= activePage === 'operator' ? 'text-blue-600' : 'text-gray-400' %>"
          ></i>
          <span class="hidden sm:inline">Operators</span>
        </a>
      </li>
      <li>
        <a
          href="/dashboard/users"
          class="flex items-center px-3 lg:px-4 py-2 lg:py-3 text-sm font-medium rounded-lg transition-all duration-200 <%= activePage === 'users' ? 'bg-blue-50 text-blue-700 border-r-4 border-blue-600' : 'text-gray-700 hover:bg-gray-50 hover:text-gray-900' %>"
        >
          <i
            class="fas fa-users w-4 h-4 lg:w-5 lg:h-5 mr-3 <%= activePage === 'users' ? 'text-blue-600' : 'text-gray-400' %>"
          ></i>
          <span class="hidden sm:inline">Users</span>
        </a>
      </li>
      <!--<li>
        <a
          href="/dashboard/user-categories"
          class="flex items-center px-3 lg:px-4 py-2 lg:py-3 text-sm font-medium rounded-lg transition-all duration-200 <%= activePage === 'user-categories' ? 'bg-blue-50 text-blue-700 border-r-4 border-blue-600' : 'text-gray-700 hover:bg-gray-50 hover:text-gray-900' %>"
        >
          <i
            class="fas fa-users-cog w-4 h-4 lg:w-5 lg:h-5 mr-3 <%= activePage === 'user-categories' ? 'text-blue-600' : 'text-gray-400' %>"
          ></i>
          <span class="hidden sm:inline">User Categories</span>
        </a>
      </li>-->
      <% } %>
    </ul>
  </nav>

  <!-- User Info & Logout -->
  <div class="p-3 lg:p-4 border-t border-gray-200">
    <div class="flex items-center mb-3 p-2 lg:p-3 bg-gray-50 rounded-lg">
      <div
        class="w-6 h-6 lg:w-8 lg:h-8 bg-gradient-to-r from-blue-600 to-cyan-600 rounded-full flex items-center justify-center mr-3"
      >
        <i class="fas fa-user text-white text-xs lg:text-sm"></i>
      </div>
      <div class="flex-1 min-w-0">
        <p class="text-xs lg:text-sm font-medium text-gray-900 truncate">
          <%= user.role === 'admin' ? 'Administrator' : 'Operator' %>
        </p>
        <p class="text-xs text-gray-500">
          <%= user.cnic_num ? user.cnic_num.substring(0, 5) + '***' : 'User' %>
        </p>
      </div>
    </div>
    <a
      href="/logout"
      class="flex items-center w-full px-3 lg:px-4 py-2 text-sm font-medium text-red-700 bg-red-50 rounded-lg hover:bg-red-100 transition-colors duration-200"
    >
      <i class="fas fa-sign-out-alt w-4 h-4 mr-3"></i>
      <span class="hidden sm:inline">Logout</span>
    </a>
  </div>
</aside>

<!-- Mobile sidebar overlay -->
<div
  id="sidebar-overlay"
  class="fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden hidden"
></div>

<!-- Mobile menu toggle script -->
<script>
  function toggleSidebar() {
    const sidebar = document.getElementById("sidebar");
    const overlay = document.getElementById("sidebar-overlay");

    if (sidebar.classList.contains("-translate-x-full")) {
      sidebar.classList.remove("-translate-x-full");
      overlay.classList.remove("hidden");
    } else {
      sidebar.classList.add("-translate-x-full");
      overlay.classList.add("hidden");
    }
  }

  // Close sidebar when clicking overlay
  document
    .getElementById("sidebar-overlay")
    .addEventListener("click", toggleSidebar);

  // Close sidebar on escape key
  document.addEventListener("keydown", function (e) {
    if (e.key === "Escape") {
      const sidebar = document.getElementById("sidebar");
      const overlay = document.getElementById("sidebar-overlay");
      if (!sidebar.classList.contains("-translate-x-full")) {
        sidebar.classList.add("-translate-x-full");
        overlay.classList.add("hidden");
      }
    }
  });
</script>
